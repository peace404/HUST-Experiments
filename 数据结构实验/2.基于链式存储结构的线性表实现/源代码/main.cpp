#include"def.h"
#include"fun.h"

int sta, n;
LISTS Lists;
LinkList L;
int main()
{
	int op = 1;
	Lists.length = 0;
	while (op)
	{
		system("cls");	printf("\n\n");
		printf("      Menu for Linear Table On Sequence Structure \n");
		printf("-------------------------------------------------\n");
		printf("    	  1. AddList        11. PriorElem\n");
		printf("    	  2. ShiftList      12. NextElem\n");
		printf("    	  3. RemoveList     13. ListInsert\n");
		printf("    	  4. LocateList     14. ListDelete\n");
		printf("    	  5. DestroyList    15. ListTraverse\n");
		printf("    	  6. ClearList      16. reverseList\n");
		printf("    	  7. ListEmpty      17. RemoveNthFromEnd\n");
		printf("    	  8. ListLength     18. sortList\n");
		printf("    	  9. GetElem        19. SaveList\n");
		printf("    	  10. LocateElem    20. LoadList\n");
		printf("    	  0. Exit           21. InitList\n");
		printf("-------------------------------------------------\n");
		printf("    请选择你的操作[0~12](当前操作线性表为%d):", n + 1);
		scanf("%d", &op);
		switch (op)
		{
		case 1://AddList
			sta = AddList(Lists);
			if (sta == ERROR)
				printf_red("	添加失败，线性表数量已达上限！\n");
			else
				printf_green("	添加成功！\n");
			getchar(); getchar();
			break;
		case 2://ShiftList
			sta = ShiftList();
			if (sta == ERROR)
				printf_red("	该线性表不存在！\n");
			else
				printf_green("	转换成功！\n");
			getchar(); getchar();
			break;
		case 3://RemoveList
			sta = RemoveList(Lists);
			if (sta == OK)
				printf_green("	删除成功！\n");
			else
				printf_red("	未找到该线性表!\n");
			getchar(); getchar();
			break;
		case 4://LocateList
			sta = LocateList(Lists);
			if (sta == 0)
				printf_red("	未找到该线性表!\n");
			else
			{
				printf("	这是第%d个线性表，内容如下：\n", sta);
				printf("%s ", Lists.elem[sta - 1].name);
				ListTraverse(Lists.elem[sta - 1].L);
				putchar('\n');
			}
			getchar(); getchar();
			break;
		case 5://DestroyList
			sta = DestroyList(Lists.elem[n].L);
			if (sta == OK)
				printf_green("	线性表已销毁!\n");
			else
				printf_red("	线性表不存在！\n");
			getchar(); getchar();
			break;
		case 6://ClearList
			sta = ClearList(Lists.elem[n].L);
			if (sta == OK)
				printf_green("	线性表已清空!\n");
			else if (sta == ERROR)
				printf_yellow("	线性表已为空！\n");
			else
				printf_red("	线性表不存在！\n");
			getchar(); getchar();
			break;
		case 7://ListEmpty
			sta = ListEmpty(Lists.elem[n].L);
			if (sta == INFEASIBLE)
				printf_red("    线性表不存在!\n");
			else if (sta == TRUE)
				printf_green("    线性表为空！\n");
			else
				printf_yellow("    线性表不为空！\n");
			getchar(); getchar();
			break;
		case 8://ListLength
			sta = ListLength(Lists.elem[n].L);
			if (sta == INFEASIBLE)
				printf_red("	线性表不存在!\n");
			else
				printf("	线性表的长度为 %d", ListLength(Lists.elem[n].L));
			getchar(); getchar();
			break;
		case 9://GetElem
		{
			ElemType e;
			sta = GetElem(Lists.elem[n].L, e);
			if (sta == INFEASIBLE)
				printf_red("	线性表不存在!\n");
			else if (sta == ERROR)
				printf_red("	不存在该元素!\n");
			else
				printf("这个元素是 %d\n", e);
			getchar(); getchar();
			break;
		}
		case 10://LocateElem
			sta = LocateElem(Lists.elem[n].L);
			if (sta == INFEASIBLE)
				printf_red("	线性表不存在!\n");
			else if (sta == ERROR)
				printf_yellow("	没有找到该元素!\n");
			else
				printf("	这是第 %d 个元素\n", sta);
			getchar(); getchar();
			break;
		case 11://PriorElem
		{
			int pre = 0;
			sta = PriorElem(Lists.elem[n].L, pre);
			if (sta == INFEASIBLE)
				printf_red("	线性表不存在!\n");
			else if (sta == ERROR)
				printf_red("	没有找到前驱!\n");
			else
				printf("	该元素的前驱为 %d \n", pre);
			getchar(); getchar();
			break;
		}
		case 12://NextElem
		{
			int next = 0;
			sta = NextElem(Lists.elem[n].L, next);
			if (sta == INFEASIBLE)
				printf_red("	线性表不存在!\n");
			else if (sta == ERROR)
				printf_red("	没有找到后继!\n");
			else
				printf("	该元素的后继为 %d \n", next);
			getchar(); getchar();
			break;
		}
		case 13://ListInsert
			sta = ListInsert(Lists.elem[n].L);
			if (sta == INFEASIBLE)
				printf_red("	线性表不存在!\n");
			else if (sta == ERROR)
				printf_yellow("	插入位置不正确!\n");
			else
				printf_green("	插入成功!\n");
			getchar(); getchar();
			break;
		case 14://ListDelete
		{
			int e;
			sta = ListDelete(Lists.elem[n].L,e);
			if (sta == INFEASIBLE)
				printf_red("	线性表不存在!\n");
			else if (sta == ERROR)
				printf_yellow("	删除位置不正确!\n");
			else
			{
				printf_green("	删除成功!\n");
				printf("	你删除的元素是 %d !\n", e);
			}
			getchar(); getchar();
			break;
		}
		case 15://ListTraverse
			printf("\n-----------all elements -----------------------\n");
			for (int i = 0; i < Lists.length; i++)
			{
				printf("%d.", i + 1);
				printf("%s ", Lists.elem[i].name);
				sta = ListTraverse(Lists.elem[i].L);
				if (sta == INFEASIBLE)
					printf_red("该线性表不存在！\n");
				putchar('\n');
			}
			printf("\n------------------ end ------------------------\n");
			getchar(); getchar();
			break;
		case 16://reverseList
			sta = reverseList(Lists.elem[n].L);
			if (sta == INFEASIBLE)
				printf_red("    线性表不存在!\n");
			else if (sta == ERROR)
				printf_yellow("    线性表为空！\n");
			else
				printf_green("    翻转成功！\n");
			getchar(); getchar();
			break;
		case 17://RemoveNthFromEnd
			sta = RemoveNthFromEnd(Lists.elem[n].L);
			if (sta == INFEASIBLE)
				printf_red("    线性表不存在!\n");
			else if (sta == ERROR)
				printf_yellow("    线性表为空！\n");
			else
				printf_green("    删除成功！\n");
			getchar(); getchar();
			break;
		case 18://sortList
			sta = sortList(Lists.elem[n].L);
			if (sta == INFEASIBLE)
				printf_red("    线性表不存在!\n");
			else if (sta == ERROR)
				printf_yellow("    线性表为空！\n");
			else
				printf_green("    从小到大排序成功！\n");
			getchar(); getchar();
			break;
		case 19://SaveList
			sta = SaveList(Lists.elem[n].L);
			if (sta == INFEASIBLE)
				printf_red("    线性表不存在!\n");
			else
				printf_green("	写入成功！\n");
			getchar(); getchar();
			break;
		case 20://LoadList
			sta = LoadList(Lists.elem[n].L);
			if (sta == INFEASIBLE)
				printf_red("    线性表不存在!\n");
			else if (sta == ERROR)
				printf_red("	线性表已有数据！\n");
			else
				printf_green("	读入成功！\n");
			getchar(); getchar();
			break;
		case 21://InitList
			if (InitList(Lists.elem[n].L) == OK)
				printf_green("	线性表创建成功！\n");
			else
				printf_red("	线性表创建失败！\n");
			getchar(); getchar();
			break;
		case 0://exit
			break;
		}//end of switch
	}//end of while
	printf("欢迎下次再使用本系统！\n");
}//end of main()
/*--------page 23 on textbook --------------------*/


int compare(const void* a, const void* b)
{
	return *(int*)b - *(int*)a;
}

void printf_red(const char* s)
{
	printf("\033[1;31m%s\033[0m", s);
}

void printf_green(const char* s)
{
	printf("\033[1;32m%s\033[0m", s);
}

void printf_yellow(const char* s)
{
	printf("\033[1;33m%s\033[0m", s);
}
